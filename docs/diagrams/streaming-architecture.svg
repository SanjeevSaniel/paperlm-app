<svg width="800" height="600" viewBox="0 0 800 600" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .title { font: bold 18px Arial; text-anchor: middle; }
      .subtitle { font: 14px Arial; text-anchor: middle; }
      .label { font: 12px Arial; text-anchor: middle; }
      .small-label { font: 10px Arial; text-anchor: middle; }
      .component { fill: #3B82F6; stroke: #1E40AF; stroke-width: 2; rx: 8; }
      .api { fill: #10B981; stroke: #047857; stroke-width: 2; rx: 8; }
      .ai { fill: #8B5CF6; stroke: #6D28D9; stroke-width: 2; rx: 8; }
      .data { fill: #F59E0B; stroke: #D97706; stroke-width: 2; rx: 8; }
      .flow-arrow { stroke: #374151; stroke-width: 2; marker-end: url(#arrowhead); }
      .stream-arrow { stroke: #EF4444; stroke-width: 3; marker-end: url(#streamhead); stroke-dasharray: 5,5; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#374151" />
    </marker>
    <marker id="streamhead" markerWidth="12" markerHeight="8" refX="11" refY="4" orient="auto">
      <polygon points="0 0, 12 4, 0 8" fill="#EF4444" />
    </marker>
  </defs>
  
  <!-- Title -->
  <text x="400" y="30" class="title" fill="#1F2937">Vercel AI SDK Streaming Architecture</text>
  
  <!-- Frontend Layer -->
  <rect x="50" y="70" width="700" height="120" fill="#F3F4F6" stroke="#D1D5DB" stroke-width="1" rx="8"/>
  <text x="400" y="90" class="subtitle" fill="#374151">Frontend Components</text>
  
  <!-- Chat Panel -->
  <rect x="70" y="100" width="120" height="60" class="component"/>
  <text x="130" y="125" class="label" fill="white">Chat Panel</text>
  <text x="130" y="140" class="small-label" fill="#E5E7EB">AIChatPanel.tsx</text>
  
  <!-- Streaming Message -->
  <rect x="210" y="100" width="120" height="60" class="component"/>
  <text x="270" y="125" class="label" fill="white">Streaming UI</text>
  <text x="270" y="140" class="small-label" fill="#E5E7EB">StreamingMessage.tsx</text>
  
  <!-- Chat Input -->
  <rect x="350" y="100" width="120" height="60" class="component"/>
  <text x="410" y="125" class="label" fill="white">Chat Input</text>
  <text x="410" y="140" class="small-label" fill="#E5E7EB">Controls & Toggle</text>
  
  <!-- Streaming Hook -->
  <rect x="490" y="100" width="120" height="60" class="component"/>
  <text x="550" y="125" class="label" fill="white">Stream Hook</text>
  <text x="550" y="140" class="small-label" fill="#E5E7EB">useStreamingChat</text>
  
  <!-- API Layer -->
  <rect x="50" y="220" width="700" height="120" fill="#ECFDF5" stroke="#D1FAE5" stroke-width="1" rx="8"/>
  <text x="400" y="240" class="subtitle" fill="#047857">API Endpoints</text>
  
  <!-- Stream API -->
  <rect x="150" y="250" width="140" height="60" class="api"/>
  <text x="220" y="275" class="label" fill="white">/api/query/stream</text>
  <text x="220" y="290" class="small-label" fill="#D1FAE5">Real-time streaming</text>
  
  <!-- Legacy API -->
  <rect x="310" y="250" width="140" height="60" class="api"/>
  <text x="380" y="275" class="label" fill="white">/api/query</text>
  <text x="380" y="290" class="small-label" fill="#D1FAE5">Fallback mode</text>
  
  <!-- Chat API -->
  <rect x="470" y="250" width="140" height="60" class="api"/>
  <text x="540" y="275" class="label" fill="white">/api/chat/stream</text>
  <text x="540" y="290" class="small-label" fill="#D1FAE5">Conversation mgmt</text>
  
  <!-- AI Infrastructure -->
  <rect x="50" y="370" width="350" height="120" fill="#F5F3FF" stroke="#E9D5FF" stroke-width="1" rx="8"/>
  <text x="225" y="390" class="subtitle" fill="#6D28D9">AI Infrastructure</text>
  
  <!-- Vercel AI SDK -->
  <rect x="70" y="400" width="120" height="60" class="ai"/>
  <text x="130" y="425" class="label" fill="white">Vercel AI SDK</text>
  <text x="130" y="440" class="small-label" fill="#E9D5FF">streamText()</text>
  
  <!-- AI Config -->
  <rect x="210" y="400" width="120" height="60" class="ai"/>
  <text x="270" y="425" class="label" fill="white">AI Config</text>
  <text x="270" y="440" class="small-label" fill="#E9D5FF">src/lib/ai.ts</text>
  
  <!-- Data Layer -->
  <rect x="420" y="370" width="330" height="120" fill="#FFFBEB" stroke="#FDE68A" stroke-width="1" rx="8"/>
  <text x="585" y="390" class="subtitle" fill="#D97706">Data & Context</text>
  
  <!-- Qdrant -->
  <rect x="440" y="400" width="100" height="60" class="data"/>
  <text x="490" y="425" class="label" fill="white">Qdrant</text>
  <text x="490" y="440" class="small-label" fill="#FEF3C7">Vector DB</text>
  
  <!-- NeonDB -->
  <rect x="560" y="400" width="100" height="60" class="data"/>
  <text x="610" y="425" class="label" fill="white">NeonDB</text>
  <text x="610" y="440" class="small-label" fill="#FEF3C7">Messages</text>
  
  <!-- Flow Arrows -->
  <!-- Frontend to API -->
  <line x1="190" y1="160" x2="220" y2="250" class="flow-arrow"/>
  <line x1="330" y1="160" x2="380" y2="250" class="flow-arrow"/>
  <line x1="470" y1="160" x2="540" y2="250" class="flow-arrow"/>
  
  <!-- API to AI -->
  <line x1="220" y1="310" x2="150" y2="400" class="flow-arrow"/>
  <line x1="380" y1="310" x2="270" y2="400" class="flow-arrow"/>
  
  <!-- API to Data -->
  <line x1="290" y1="280" x2="440" y2="430" class="flow-arrow"/>
  <line x1="470" y1="280" x2="560" y2="430" class="flow-arrow"/>
  
  <!-- Streaming Flow -->
  <line x1="130" y1="400" x2="130" y2="320" class="stream-arrow"/>
  <line x1="130" y1="320" x2="270" y2="160" class="stream-arrow"/>
  <text x="200" y="340" class="small-label" fill="#EF4444">Real-time stream</text>
  
  <!-- Legend -->
  <rect x="580" y="520" width="180" height="70" fill="white" stroke="#D1D5DB" stroke-width="1" rx="4"/>
  <text x="670" y="540" class="label" fill="#374151">Legend</text>
  <line x1="590" y1="550" x2="610" y2="550" class="flow-arrow"/>
  <text x="620" y="555" class="small-label" fill="#374151">Regular flow</text>
  <line x1="590" y1="565" x2="610" y2="565" class="stream-arrow"/>
  <text x="620" y="570" class="small-label" fill="#374151">Streaming flow</text>
</svg>